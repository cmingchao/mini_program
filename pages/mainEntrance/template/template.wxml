<template name="header">
  <view class="header">
    <view class="bigTitle">今日工作</view>
    <view class="btnBox">
      <navigator open-type='redirect' url="/pages/mainEntrance/waitTakeGoods/waitTakeGoods" class="{{currentPage==='waitTakeGoods'?'color-red':''}}" plain="true">
        <text class="num">{{obj.waitTakeGoodsNum}}</text>
        <text class="status">待取货</text>
      </navigator>
      <navigator open-type='redirect' url="/pages/mainEntrance/takeGoodsComplete/takeGoodsComplete" class="{{currentPage==='takeGoodsComplete'?'color-red':''}}" plain="true">
        <text class="num">{{obj.takeGoodsCompleteNum}}</text>
        <text class="status">取货完成</text>
      </navigator>
      <navigator open-type='redirect' url="/pages/mainEntrance/waitGiveGoods/waitGiveGoods" class="{{currentPage==='waitGiveGoods'?'color-red':''}}" plain="true">
        <text class="num">{{obj.waitGiveGoodsNum}}</text>
        <text class="status">待送货</text>
      </navigator>
      <navigator open-type='redirect' url="/pages/mainEntrance/giveGoodsComplete/giveGoodsComplete" class="{{currentPage==='giveGoodsComplete'?'color-red':''}}" plain="true">
        <text class="num">{{obj.giveGoodsCompleteNum}}</text>
        <text class="status">送货完成</text>
      </navigator>
    </view>
  </view>
</template>

<template name="wait-take-give-item">
  <view class="wait-take-give-item">
    <view class="status">
      <text wx:if="{{serveStatus==1}}">待取货</text>
      <text wx:elif="{{serveStatus==2}}">取货中</text>
      <text wx:elif="{{serveStatus==3}}">取货完成</text>
      <text wx:elif="{{serveStatus==4}}">待送货</text>
      <text wx:elif="{{serveStatus==5}}">送货中</text>
      <text wx:elif="{{serveStatus==6}}">送货完成</text>
      <text wx:elif="{{serveStatus==7}}">已取消</text>
      <text wx:elif="{{serveStatus==8}}">已自提</text>
      <text wx:elif="{{serveStatus==9}}">超时失败</text>
      <text wx:elif="{{finishedStatus==0}}">待送货</text>
      <text wx:elif="{{finishedStatus==1}}">送货中</text>
      <text wx:elif="{{finishedStatus==2}}">送货完成</text>
      <text wx:if="{{giveType==1}}">{{deliveryTime}}之前送达</text>
      <text wx:elif="{{giveType==2}}">用户自提</text>
      <image src="/pages/images/icon-emergency.png" class="icon-emergency" wx:if='{{gradeNum==1}}'></image>
    </view>
    <view class="take-give" wx:if='{{shopName}}'>
      <view>
        <text>取</text>
        <text>{{shopName}}</text>
      </view>
      <view>
        <text>送</text>
        <text>{{deskName}}</text>
      </view>
    </view>
    <view class="take-give" wx:else>
      <view>
        <text>取</text>
        <text>{{deskName}}</text>
      </view>
      <view>
        <text>送</text>
        <text>{{deliveryAddressName}}</text>
      </view>
    </view>
    <view class="normal" wx:if="{{flag===0}}"></view>
    <view class="code" wx:elif="{{flag===1}}">
      <view>
        <text>贴袋码：</text>
        <text>{{bagCode || '无'}}</text>
      </view>
      <view>
        <text>顾客信息：</text>
        <text>{{customerName || '无'}} {{mobile || '无'}}</text>
        <button wx:if="{{mobile}}" data-phone="{{mobile}}" bindtap='callPhone'>联系</button>
      </view>
      <!-- <view>
        <text>备注：</text>
        <text>{{'开始派送前请电话确认'}}</text>
      </view> -->
    </view>
    <view class="cancelReason" wx:else>
      <view>
        <text>取消原因：</text>
        <text>{{cancelReason || '未知'}}</text>
      </view>
    </view>
  </view>
</template>

<template name='complete-take-give-item'>
  <view class='complete-take-give-item'>
    <view class='take-give'>
      <view class='take'>
        <text>取</text>
        <text wx:if='{{item.shopName}}'>{{item.shopName}}</text>
        <text wx:else>{{item.deskName}}</text>
      </view>
      <view class='btn'>
        <button size="mini" bindtap='getDetails' data-item='{{item}}' data-serveNumber='{{item.serveNumber}}' data-wrapNumber="{{item.wrapNumber}}">查看</button>
      </view>
      <view class='give'>
        <text>送</text>
        <text wx:if='{{item.shopName}}'>{{item.deskName}}</text>
        <text wx:else>{{item.deliveryAddressName}}</text>
      </view>
    </view>
  </view>
</template>

<template name="order">
  <view class="order-box" wx:if='{{serveInfoVos}}'>
    <view class="order-item" wx:for="{{serveInfoVos}}" wx:key="index">
      <view class="order-index font-middle">No.{{index+1}}</view>
      <view class="brand-orderNum color-gray">
        <view class="brand-info font-middle">
          <image src="/pages/images/icon-storeLogo.png" class="brand-logo"></image>
          <text class="brand-name">{{item.shopName}}</text>
        </view>
        <view class="order-num">
          <text>订单号：</text>
          <text>{{item.serveNumber}}</text>
        </view>
      </view>
      <view class="order-info font-middle" wx:if="{{item.goodsDetail}}">
        <text>{{item.goodsDetail}}</text>
      </view>
    </view>
    <view class="more" wx:if="{{serveInfoVos.length>2}}">
      <image src="/pages/images/icon-arrow.png"></image>
    </view>
  </view>
  <view class="order-box" wx:else>
    <view class="order-item">
      <view class="order-index font-middle" wx:if='{{false}}'>No.{{index+1}}</view>
      <view class="brand-orderNum color-gray">
        <view class="brand-info font-middle" wx:if='{{false}}'>
          <image src="/pages/images/icon-storeLogo.png" class="brand-logo"></image>
          <text class="brand-name">{{item.shopName}}</text>
        </view>
        <view class="order-num">
          <text>订单号：</text>
          <text>{{item.serveNumber}}</text>
        </view>
      </view>
      <view class="order-info font-middle" wx:if="{{item.goodsDetail}}">
        <text>{{item.goodsDetail}}</text>
      </view>
    </view>
    <view class="more" wx:if="{{false}}">
      <image src="/pages/images/icon-arrow.png"></image>
    </view>
  </view>
</template>